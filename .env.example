# ===================================================================
# ZtoApi 多平台配置模板
# ===================================================================
# 复制此文件为 .env.local 并填入实际配置值
# 注意：.env.local 已被 .gitignore 忽略，不会提交到版本控制

# ===================================================================
# 基础服务配置
# ===================================================================
PORT=9090                                    # 服务端口
DEBUG_MODE=true                              # 调试模式：true/false
DEFAULT_KEY=sk-your-secret-key-here          # 客户端API密钥
DEFAULT_STREAM=true                          # 默认流式模式：true/false
DASHBOARD_ENABLED=true                       # 启用Dashboard：true/false
ENABLE_THINKING=false                        # 启用思考模式：true/false

# ===================================================================
# 多平台模型映射 (核心配置)
# ===================================================================
# 定义模型名称到平台的映射关系
# 格式：JSON，注意引号需要转义
MODEL_NAME=glm-4.5
MODEL_PLATFORM_MAP={\"glm-4.5\":{\"platform\":\"zread\",\"upstream\":\"glm-4.5\"},\"claude-4-sonnet\":{\"platform\":\"zread\",\"upstream\":\"claude-4-sonnet\"},\"GLM-4.6\":{\"platform\":\"zai\",\"upstream\":\"0727-360B-API\"}}

# ===================================================================
# 平台配置 - zread.ai
# ===================================================================
PLATFORM_ID=zread                           # 平台标识
PROVIDER_NAME=zread.ai                      # 平台名称
PROVIDER_BRAND=zread.ai                     # 平台品牌
PROVIDER_HOME_URL=https://zread.ai          # 平台主页
ORIGIN_BASE=https://zread.ai                # API请求Origin
PLATFORM_API_BASE=https://zread.ai          # API基础URL
UPSTREAM_URL=https://zread.ai/api/v1/talk   # 上游API地址
REFERER_PREFIX=/chat/                       # Referer前缀
DEFAULT_UPSTREAM_MODEL_ID=glm-4.5           # 默认上游模型

# ===================================================================
# 平台配置 - Z.ai (可选)
# ===================================================================
# 如果需要同时支持 Z.ai 平台，取消注释以下配置
# ZAI_TOKEN=your-zai-platform-token-here
# ZAI_HOME_URL=https://chat.z.ai
# ZAI_API_BASE=https://chat.z.ai
# ZAI_UPSTREAM_URL=https://chat.z.ai/api/chat/completions

# ===================================================================
# 认证配置
# ===================================================================
# zread.ai 平台令牌 (必需)
UPSTREAM_TOKEN=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9...  # 替换为实际的zread.ai令牌

# 令牌池配置 (可选)
# 支持多个令牌，用 | 分隔
# ZREAD_TOKENS=token1|token2|token3

# 或使用JSON格式配置不同平台的令牌
# PLATFORM_TOKEN_MAP={\"zread\":[\"token1\",\"token2\"],\"zai\":[\"token3\"]}

# ===================================================================
# 客户端配置
# ===================================================================
DEFAULT_KEY=sk-your-secret-key-here          # 客户端访问密钥
X_FE_VERSION=prod-fe-1.0.94                 # 前端版本

# ===================================================================
# 使用说明
# ===================================================================
# 1. 复制此文件为 .env.local
# 2. 根据实际需求修改配置值
# 3. 至少需要配置：DEFAULT_KEY, MODEL_PLATFORM_MAP, UPSTREAM_TOKEN
# 4. 运行：deno task start (Deno版本) 或 go run main.go (Go版本)
# 5. 访问 http://localhost:9090/dashboard 查看监控面板
# 6. 访问 http://localhost:9090/docs 查看API文档

# ===================================================================
# 示例配置
# ===================================================================

# 1. 仅 zread.ai 平台配置：
# PLATFORM_ID=zread
# MODEL_PLATFORM_MAP={\"glm-4.5\":{\"platform\":\"zread\",\"upstream\":\"glm-4.5\"},\"claude-4-sonnet\":{\"platform\":\"zread\",\"upstream\":\"claude-4-sonnet\"}}
# UPSTREAM_TOKEN=your-zread-token

# 2. 多平台配置 (推荐)：
# MODEL_PLATFORM_MAP={\"glm-4.5\":{\"platform\":\"zread\",\"upstream\":\"glm-4.5\"},\"claude-4-sonnet\":{\"platform\":\"zread\",\"upstream\":\"claude-4-sonnet\"},\"GLM-4.6\":{\"platform\":\"zai\",\"upstream\":\"0727-360B-API\"}}
# UPSTREAM_TOKEN=your-zread-token
# ZAI_TOKEN=your-zai-token

# 3. 生产环境示例：
# DEFAULT_KEY=sk-production-key-2024
# PORT=8080
# DEBUG_MODE=false
# DEFAULT_STREAM=true
# ENABLE_THINKING=true
# UPSTREAM_TOKEN=your-production-zread-token

# 4. 开发环境示例：
# DEFAULT_KEY=sk-dev-key
# PORT=9090
# DEBUG_MODE=true
# DEFAULT_STREAM=false
# UPSTREAM_TOKEN=your-dev-zread-token

# ===================================================================
# 故障排除
# ===================================================================
# 如果遇到JSON解析错误：
# 1. 检查MODEL_PLATFORM_MAP的JSON格式是否正确
# 2. 确保所有引号都已正确转义：\" 替换 "
# 3. 可以使用在线JSON验证器检查格式

# 如果模型无法访问：
# 1. 检查UPSTREAM_TOKEN是否有效
# 2. 检查UPSTREAM_URL是否正确
# 3. 查看控制台日志获取详细错误信息

# 如果Dashboard无法访问：
# 1. 确认DASHBOARD_ENABLED=true
# 2. 检查端口是否被占用
# 3. 检查防火墙设置